@charset "UTF-8";

// -----------------------------------------------------------------------------
// SCSS Variables
// -----------------------------------------------------------------------------

$button-h: 47px;
$button-h-s: 37px;
$menu-h: 50px;
$border-radius: 3px;
$space: 15px;
$ui-space-mob: 45px;
$ui-space-dsk: 65px;
$border-width-mob: 1px;
$border-width-dsk: 1px;
$c-whiteish: #f1f3d7;
$transition-duration: 800ms;
$transition-duration-fast: 300ms;
$transition-duration-slow: 1400ms;
$bg-img-w: 3077px;
$bg-img-h: 1080px;

// -----------------------------------------------------------------------------
// External files import
// -----------------------------------------------------------------------------

@import "bootstrap-scss/_functions";
@import "bootstrap-scss/_variables";
@import "bootstrap-scss/mixins/_breakpoints";
@import "_reset";
@import "_typography";
@import "_mixins";
@import "_switch";
@import "hamburger-settings";
@import "hamburgers/hamburgers";

// -----------------------------------------------------------------------------
// CSS Variables
// -----------------------------------------------------------------------------

html {
  --ui-space: #{$ui-space-mob};
  --border-width: #{$border-width-mob};
  --c-whiteish: #{$c-whiteish};
  --stars-color: unset;
  @include media-breakpoint-up(md) {
    --ui-space: #{$ui-space-dsk};
    --border-width: #{$border-width-dsk};
  }
}

// -----------------------------------------------------------------------------
// Utilities
// -----------------------------------------------------------------------------

.no-u {
  text-decoration: none;
}
.u-hover {
  text-decoration: none;
  &:hover {
    text-decoration: underline;
  }
}
.pointer {
  cursor: pointer;
}
.upper {
  text-transform: uppercase;
}
.lower {
  text-transform: none;
}

.p-space {
  padding: $space;
}
.pt-space {
  padding-top: $space;
}
.pb-space {
  padding-bottom: $space;
}
.pl-space {
  padding-left: $space;
}
.pr-space {
  padding-right: $space;
}
.m-space {
  margin: $space;
}
.mt-space {
  margin-top: $space;
}
.mb-space {
  margin-bottom: $space;
}
.ml-space {
  margin-left: $space;
}
.mr-space {
  margin-right: $space;
}
.px-space {
  padding-left: $space;
  padding-right: $space;
}
.py-space {
  padding-top: $space;
  padding-bottom: $space;
}
.mx-space {
  margin-left: $space;
  margin-right: $space;
}
.my-space {
  margin-top: $space;
  margin-bottom: $space;
}

// -----------------------------------------------------------------------------
// General tags & classes
// -----------------------------------------------------------------------------

* {
  // text-rendering: auto;
  // text-rendering: optimizeSpeed;
  // text-rendering: optimizeLegibility;
  text-rendering: geometricPrecision; // OK on chrome
}

html {
  font-size: 100%;
}

body {
  overflow-x: hidden;
  width: 100vw;
  background-color: black;
  color: var(--c-whiteish);
  @include font-serif-l;
  text-align: center;
  &.media-open {
    overflow: hidden;
  }
  &[data-menu-panel="true"],
  &[data-about-panel="true"] {
    main {
      // filter: blur(15px);
      opacity: 0.1;
    }
  }
  &[data-track-open=""] .player-ui {
    opacity: 0 !important;
    pointer-events: none;
  }
}

hr {
  border-top: var(--border-width) solid var(--c-whiteish);
}

a {
  // text-decoration: none;
  text-decoration-thickness: 1px;
  text-underline-offset: 10%;
  color: inherit;
  &:not(.no-color):not(.track):hover {
    color: white;
    color: var(--stars-color, var(--c-whiteish));
  }
}

p {
  @include font-serif-l;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 300;
  margin-bottom: $space;
  @include font-serif-l;
}

ul {
  list-style: none;
  padding-left: 0;
  margin-left: 0;
}

// -----------------------------------------------------------------------------
// REUSABLE PIECES
// -----------------------------------------------------------------------------

.custom-hover:hover {
  color: var(--hover-color);
}
.only-dsk {
  @include media-breakpoint-down(xs) {
    display: none !important;
  }
}
.only-mob {
  @include media-breakpoint-up(sm) {
    display: none !important;
  }
}
.button-wrapper,
button {
  img {
    width: 100%;
    height: 100%;
  }
}

.fade-in {
  opacity: 0;
  animation: fadeIn 1s ease-in forwards;
  &.duration-1s {
    animation-duration: 1s;
  }
  &.duration-2s {
    animation-duration: 2s;
  }
  &.delay-1s {
    animation-delay: 1s;
  }
  &.delay-2s {
    animation-delay: 2s;
  }
}

// -----------------------------------------------------------------------------
// ACCESSIBILITY
// -----------------------------------------------------------------------------

.focusable {
  &:focus,
  &:focus-visible {
    box-shadow: 0px 0px 5px var(--c-whiteish);
    // outline-color: green;
    // outline-width: 5px;
  }
}

// -----------------------------------------------------------------------------
// ANIMATIONS
// -----------------------------------------------------------------------------

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

@keyframes animation-float {
  0% {
    translate: 0 0px;
  }
  50% {
    translate: 0 -20px;
  }
  100% {
    translate: 0 0px;
  }
}

@keyframes animateCircleOut {
  from {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  to {
    transform: translate(-50%, -50%) scale(3);
    opacity: 0;
  }
}

@keyframes animateCircleIn {
  from {
    width: 0;
    height: 0;
  }
  to {
    width: calc(75vmin - 80px);
    height: calc(75vmin - 80px);
  }
}

@keyframes animation-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes animation-loading {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes animation-blink-loading {
  0% {
    opacity: 1;
  }
  1% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes animation-blink-hint {
  0% {
    opacity: 0;
  }
  70% {
    opacity: 0;
  }
  77% {
    opacity: 1;
  }
  84% {
    opacity: 0;
  }
  91% {
    opacity: 1;
  }
  98% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

@keyframes animation-blink-simple {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes bgPan {
  from {
    background-position-x: 0;
  }
  to {
    background-position-x: -$bg-img-w;
  }
}

@keyframes bgPan4k {
  from {
    background-position-x: 0;
  }
  to {
    background-position-x: $bg-img-w * 3;
  }
}

// -----------------------------------------------------------------------------
// MAIN AREA
// -----------------------------------------------------------------------------

body[data-player-playing="true"]:not([data-player-loading="true"]) {
  &[data-track-type="video"] {
    main#main-content[data-player-controls-hidden="true"] {
      #player-ui-buttons {
        opacity: 0;
      }
      #circle-wrapper {
        opacity: 0;
      }
    }
  }
}

main {
  z-index: 29;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  // top: var(--ui-space);
  // left: var(--ui-space);
  // right: var(--ui-space);
  // bottom: var(--ui-space);
  &:not(#main-content) {
    overflow-y: auto;
  }
  &#main-content {
    transition: all $transition-duration;
    display: flex;
    justify-content: center;
    align-items: center;
    #backgrounds {
      #bg-layer1,
      #bg-layer2,
      #color-cover {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }
      #bg-layer1,
      #bg-layer2 {
        z-index: 30;
        background-size: #{$bg-img-w} #{$bg-img-h}; // half of the original image size
        background-image: url(../images/test-bg-l.gif);
        opacity: 0;
        transition: opacity $transition-duration-slow,
          transform $transition-duration-slow;

        // ---

        // @at-root body[data-circle-animation-stage=""] & {
        //   // background-color: red;
        //   transform: scale(1);
        //   opacity: 1;
        // }

        // @at-root body[data-circle-animation-stage="1"] & {
        //   // background-color: green;
        //   transform: scale(1.4);
        //   opacity: 0;
        // }
        @at-root body[data-circle-animation-stage="2"] & {
          // background-color: blue;
          transform: scale(0.8);
          opacity: 0;
        }

        // ---

        @at-root body[data-circle-animation-stage=""][data-track-type="audio"]:not(
              [data-track-open=""]
            )
            & {
          opacity: 1;
        }
        @at-root body[data-circle-animation-stage=""][data-player-playing="false"]
            & {
          animation-play-state: paused;
        }
        @at-root body[data-circle-animation-stage=""][data-player-loading="true"]
            & {
          animation-play-state: paused;
        }

        // ---
      }
      #bg-layer1 {
        animation: bgPan 200s linear infinite;
        background-position-y: 0%;
        @at-root body[data-circle-animation-stage="1"] & {
          // background-color: green;
          transform: scale(1.2);
          opacity: 0;
        }
      }
      #bg-layer2 {
        animation: bgPan 450s linear infinite;
        background-position-y: 100%;
        @at-root body[data-circle-animation-stage="1"] & {
          // background-color: green;
          transform: scale(1);
          opacity: 0;
        }
        @at-root body[data-circle-animation-stage=""][data-track-type="audio"]:not(
              [data-track-open=""]
            )
            & {
          opacity: 0.7;
        }
      }
      #color-cover {
        z-index: 31;
        background-color: black;
        pointer-events: none;
        // transition: all 800ms $transition-duration;
        // transition: all $transition-duration;
        transition: all 200ms;
        mix-blend-mode: multiply;
        @at-root body:not([data-track-type="audio"]) & {
          opacity: 0 !important;
        }
        @at-root body[data-track-type="audio"][data-track-open=""] & {
          opacity: 0;
        }
      }
    }
    #media-container {
      z-index: 29;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      overflow: hidden;
      transition: all $transition-duration;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: black;
      .plyr--video,
      video {
        width: 100%;
        height: 100%;
        max-width: 100%;
        max-height: 100%;
      }
      .plyr--audio {
        // opacity: 0.05;
      }
      @at-root body[data-track-type="video"] &.darken {
        opacity: 0.5;
      }
      @at-root body[data-track-type="video"][data-player-playing="false"] & {
        opacity: 0.5;
      }
      @at-root body[data-track-open=""] & {
        opacity: 0 !important;
      }
    }
    #circle-dot-wrapper {
      z-index: 60;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      #circle-dot {
        // display: none;
        pointer-events: all;
        border-radius: 50%;
        cursor: pointer;
        transition: all 500ms;
        aspect-ratio: 1/1;
        border: 1px solid var(--c-whiteish);
        transform-origin: center center;
        &.starting-point {
          width: 20px;
          height: 20px;
          background-color: var(--c-whiteish);
          animation: animation-float 6s ease-in-out infinite;
          &::after {
            content: "Click the dot to start";
            pointer-events: none;
            position: absolute;
            top: calc(50% + 2.3em);
            line-height: 1em;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: animation-blink-hint 6s infinite;
            font-size: 1.1rem;
            width: 200px;
          }
          &:hover::after {
            content: "";
          }
          &:not(.forced-start):hover {
            width: 25vmin;
            height: 25vmin;
            background-color: transparent;
            // translate: 0 0 !important;
            animation-play-state: paused;
          }
        }
        &.zoom-in {
          animation: animateCircleIn 1s forwards;
        }
        &.zoom-out {
          pointer-events: none;
          // width: 80vh;
          // height: 80vh;
          width: calc(75vmin - 80px);
          height: calc(75vmin - 80px);
          background-color: transparent;
          animation: animateCircleOut 2s;
        }
        @at-root body:not([data-track-open=""]) & {
          opacity: 0;
          pointer-events: none;
        }
      }
    }
    #circle-wrapper {
      mix-blend-mode: lighten;
      z-index: 30;
      z-index: 60;
      transition: all 1200ms;
      pointer-events: none;

      /* SAFARI FIX */
      position: relative;

      &.state-size-small {
        transform: scale(0.1);
        opacity: 0;
        // transition: all 1.2s;
      }
      &.state-size-normal {
        transform: scale(1);
        opacity: 1;
        // transition: all 1.2s;
      }
      &.state-size-large {
        transform: scale(3);
        opacity: 0;
        // transition: all 1.2s;
      }

      @include media-breakpoint-up(md) {
        width: calc(100vmin - var(--ui-space) * 3);
        height: calc(100vmin - var(--ui-space) * 3);
        max-width: 60vw;
        max-height: 60vw;
      }

      #circle-time {
        animation: animation-rotate 12s infinite linear;
        display: flex;

        // transform: scale(0.1);
        // opacity: 0;
        // transition: none;

        @at-root body[data-player-playing="false"] & {
          animation-play-state: paused;
        }
        @at-root body[data-player-loading="true"] & {
          animation-play-state: paused;
        }
        &.clean {
          text,
          rect {
            opacity: 0;
          }
        }
        svg {
          width: 100%;
          height: 100%;
          vector-effect: non-scaling-stroke;
        }

        path#circlePath {
          stroke: var(--c-whiteish);
          stroke-width: 0.4px;
          @include media-breakpoint-up(md) {
            stroke-width: 0.2px;
          }
          fill: none;
          @at-root body[data-player-loading="true"] & {
            animation: animation-blink-loading 0.8s infinite linear;
          }
        }

        rect.one,
        rect.two {
          transition: all 100ms;
          fill: black;
          stroke: none;
        }

        text {
          transition: all 100ms;
          transform: translate(-2px, 0px);
          font-size: 5px;
          font-family: sans-serif;
          fill: var(--c-whiteish);
          letter-spacing: 0.5px;
          stroke: black;
          @include font-serif-l;
          font-size: 10px !important;
          font-weight: 200;
          paint-order: stroke fill;
          #time-current,
          #time-duration {
            font-variant-numeric: tabular-nums;
          }
          #time-current {
            @at-root body[data-player-loading="true"] & {
              animation: animation-blink-loading 0.8s infinite linear;
            }
          }
        }
      }
    }

    #player-ui-buttons {
      z-index: 40;
      position: fixed;
      top: 30vh;
      transition: opacity 666ms;

      #next-track,
      #prev-track {
        position: fixed;
        bottom: calc(var(--ui-space) + 20px);
        background-color: transparent;
        height: var(--ui-space);
        width: var(--ui-space);
        cursor: pointer;
        display: flex;
      }
      #next-track {
        right: calc(var(--ui-space) + 20px);
        @include media-breakpoint-up(md) {
          top: calc(50% - var(--ui-space) / 2);
          right: calc(2vw + var(--ui-space));
        }
      }
      #prev-track {
        left: calc(var(--ui-space) + 20px);
        @include media-breakpoint-up(md) {
          top: calc(50% - var(--ui-space) / 2);
          left: calc(2vw + var(--ui-space));
        }
      }
      #play-pause-button {
        background-color: transparent;
        transition: opacity $transition-duration 400ms;
        // @include font-serif-l;
        // @include media-breakpoint-up(md) {
        //   font-size: 60px;
        //   font-size: 7vmin;
        // }
        font-size: 0;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--c-whiteish);
        &::after {
          content: "";
          display: inline-block;
          width: var(--ui-space);
          height: var(--ui-space);
          background-image: url(../images/icon-pause.svg);
          background-size: contain;
          background-position: center center;
          background-repeat: no-repeat;
          font-size: 0;
        }
        @at-root body[data-player-playing="false"] & {
          &::after {
            background-image: url(../images/icon-play.svg);
          }
        }
        @at-root body[data-circle-animating="true"] & {
          transition: none;
          opacity: 0;
        }
        // @at-root body[data-player-loading="true"] & {
        //   &::after {
        //     // background-image: url(../images/icon-loading.svg);
        //     // animation: animation-loading 6s infinite linear;
        //     animation: animation-blink-loading 0.8s infinite linear;
        //   }
        // }
      }
      #fullscreen-button {
        display: none;

        position: fixed;
        background-color: transparent;
        right: calc(var(--ui-space) + 20px);
        top: calc(var(--ui-space) + 20px);
        width: var(--ui-space);
        height: var(--ui-space);
        img {
          width: 100%;
          height: 100%;
        }
        @include media-breakpoint-up(md) {
          top: auto;
          right: calc(2vw + var(--ui-space));
          bottom: calc(2vw + var(--ui-space));
        }
        @at-root body:not([data-track-type="video"]) & {
          opacity: 0;
          pointer-events: none;
        }
      }
    }
  }
}

// #twinkle-canvas {
//   z-index: 30;
//   position: fixed;
//   top: var(--ui-space);
//   left: var(--ui-space);
//   width: calc(100% - var(--ui-space) * 2);
//   height: calc(100% - var(--ui-space) * 2);
//   pointer-events: none;
//   // background-color: rgba(red, 0.2);
// }

// -----------------------------------------------------------------------------
// PANELS
// -----------------------------------------------------------------------------

#track-info-dsk-l,
#track-info-dsk-r {
  z-index: 60;
  position: fixed;
  top: 0;
  bottom: 0;
  width: 50%;
  max-width: 50%;
  // pointer-events: none;
  transition: all $transition-duration;
  background-color: black;
  display: flex;
  align-items: stretch;
  justify-content: flex-start;
  .vertical-bar {
    width: var(--ui-space);
    height: 100%;
    background-color: black;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all $transition-duration;
    // @include font-serif-l;
    cursor: pointer;
    h2 {
      transform: rotate(-90deg);
      min-width: calc(100vh - var(--ui-space) - var(--ui-space));
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      padding: 0 15px;
    }
  }
  .content-wrapper {
    width: calc(100% - var(--ui-space));
    position: relative;
    top: var(--ui-space);
    overflow-y: auto;
    overflow-x: hidden;
    max-height: calc(100% - var(--ui-space) - var(--ui-space));
  }
  .button-wrapper {
    position: absolute;
    bottom: 0;
    background-color: transparent;
    pointer-events: none; // to access to the vertical bar event underneath
    img {
      transition: all $transition-duration;
    }
  }
}
#track-info-dsk-l {
  left: -51%;
  .vertical-bar {
    border-left: var(--border-width) solid transparent;
  }
  .button-wrapper {
    right: 0;
    img {
      @include media-breakpoint-down(xs) {
        transform: rotate(-90deg);
      }
    }
  }
  @at-root body:not([data-track-open=""]) & {
    left: calc(-50% + var(--ui-space));
  }
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      left: 0;
      .vertical-bar {
        border-left: var(--border-width) solid var(--c-whiteish);
      }
    }
    .button-wrapper img {
      transform: rotate(180deg);
      @include media-breakpoint-down(xs) {
        transform: rotate(90deg);
      }
    }
  }
}
#track-info-dsk-r {
  right: -51%;
  .vertical-bar {
    border-right: var(--border-width) solid transparent;
  }
  .button-wrapper {
    left: 0;
    img {
      @include media-breakpoint-down(xs) {
        transform: rotate(90deg);
      }
    }
  }
  @at-root body:not([data-track-open=""]) & {
    right: calc(-50% + var(--ui-space));
  }
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      right: 0;
      .vertical-bar {
        border-right: var(--border-width) solid var(--c-whiteish);
      }
    }
    .button-wrapper img {
      transform: rotate(180deg);
      @include media-breakpoint-down(xs) {
        transform: rotate(-90deg);
      }
    }
  }
}

#menu-panel {
  z-index: 30;
  position: fixed;
  top: var(--ui-space);
  left: var(--ui-space);
  right: var(--ui-space);
  bottom: var(--ui-space);
  // background-color: rgba(black, 0.8);
  opacity: 0;
  pointer-events: none;
  transition: all $transition-duration;
  @at-root body[data-menu-panel="true"] & {
    opacity: 1;
    pointer-events: all;
  }
  display: flex;
  flex-flow: column nowrap;
  justify-content: center;
  align-items: stretch;

  ul.content-wrapper {
    max-height: 100%;
    overflow-y: auto;
    padding-top: $space * 2;
    padding-bottom: $space * 2;
  }
  a.track {
    // @include font-serif-l;
    display: inline-flex;
    width: 100%;
    padding: 8px 0;
    text-decoration: none;
    .left,
    .right {
      width: 50%;
      display: inline-block;
      padding-left: $space * 1.3;
      padding-right: $space * 1.3;
    }
    .left {
      text-align: right;
    }
    .right {
      text-align: left;
    }
    &.active .right::before {
      content: " ";
      display: inline-block;
      height: 0.7em;
      width: 0.7em;
      border-radius: 50%;
      background-color: var(--c-whiteish);
      margin-right: 0.3em;
      animation: animation-blink-simple 1s infinite;
      // background-color: var(--stars-color);
    }
  }
  .line {
    border-left: var(--border-width) solid var(--c-whiteish);
    position: fixed;
    top: var(--ui-space);
    bottom: var(--ui-space);
    left: 50%;
    width: 0;
  }
  @include media-breakpoint-down(md) {
    a.track {
      // @include font-serif-m;
    }
  }
  @include media-breakpoint-down(sm) {
    a.track {
      // @include font-serif-m;
      padding-top: 15px;
      padding-bottom: 15px;
      display: block;
      .left,
      .right {
        width: 100%;
        text-align: center;
      }
    }
    .line {
      display: none;
    }
  }
}

#accessibility-panel,
#artangel-panel {
  z-index: 31;
  position: fixed;
  top: var(--ui-space);
  width: 400px;
  bottom: var(--ui-space);
  background-color: rgba(black, 0.9);
  padding: $space;
  // background-color: rgba(#9f4848, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: all $transition-duration;
  display: flex;
  align-items: center;
  justify-content: center;
  &#accessibility-panel {
    border-right: var(--border-width) solid var(--c-whiteish);
    left: var(--ui-space);
    @include media-breakpoint-down(md) {
      width: auto;
      right: 50%;
    }
    @include media-breakpoint-down(xs) {
      width: auto;
      right: var(--ui-space);
      border-right-width: 0;
    }
    @at-root body[data-accessibility-panel="true"] & {
      opacity: 1;
      pointer-events: all;
    }
    .accessibility-toggle {
      &::before {
        content: "";
        display: inline-block;
        border: 1px solid var(--c-whiteish);
        width: 1.4rem;
        height: 1.4rem;
        border-radius: 50%;
        margin-right: 0.6rem;
        position: relative;
        top: 0.1rem;
        transition: all 100ms;
      }
      &:hover::before {
        background-color: var(--c-whiteish);
        background-color: color-mix(
          in srgb,
          var(--c-whiteish),
          transparent 75%
        );
      }
    }
  }
  &#artangel-panel {
    border-left: var(--border-width) solid var(--c-whiteish);
    right: var(--ui-space);
    @include media-breakpoint-down(md) {
      width: auto;
      left: 50%;
    }
    @include media-breakpoint-down(xs) {
      width: auto;
      left: var(--ui-space);
      border-left-width: 0;
    }
    @at-root body[data-artangel-panel="true"] & {
      opacity: 1;
      pointer-events: all;
    }
  }
}

#track-info-mob {
  z-index: 30;
  position: fixed;
  top: calc(100% - var(--ui-space));
  left: var(--ui-space);
  right: var(--ui-space);
  height: calc(100% - var(--ui-space) - var(--ui-space));
  overflow-y: scroll;
  overflow-x: hidden;
  opacity: 0;
  pointer-events: none;
  transition: all $transition-duration;
  background-color: black;
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    opacity: 1;
    pointer-events: all;
    top: var(--ui-space);
  }
  @include media-breakpoint-up(sm) {
    display: none;
  }
  #track-info-artist-mob,
  #track-info-script-mob {
    // ~~~~~
    padding: #{$space * 2} $space;
  }
}

#about-panel {
  z-index: 30;
  position: fixed;
  top: calc(100% - var(--ui-space));
  left: var(--ui-space);
  right: var(--ui-space);
  height: calc(100% - var(--ui-space) - var(--ui-space));
  overflow-y: scroll;
  // background-color: rgba(#9f4848, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: all $transition-duration;
  display: flex;
  align-items: stretch;
  justify-content: flex-start;
  @at-root body[data-about-panel="true"] & {
    opacity: 1;
    pointer-events: all;
    top: var(--ui-space);
  }
  .about-content,
  .credits-content {
    width: 50%;
    padding: $space $space * 2;
  }
  .line {
    border-left: var(--border-width) solid var(--c-whiteish);
    position: fixed;
    top: var(--ui-space);
    bottom: var(--ui-space);
    left: 50%;
    width: 0;
  }
  @include media-breakpoint-down(lg) {
    flex-flow: column nowrap;
    .about-content,
    .credits-content {
      width: 100%;
    }
    .line {
      display: none;
    }
  }
}

.kt-container {
  hr {
    margin-top: 0.7em;
    margin-bottom: 0.7em;
    margin-left: -$space * 2;
    margin-right: -$space * 2;
  }
  p {
    // padding-left: $space;
    // padding-right: $space;
    // margin-top: 2.5em;
    margin-bottom: 0.7em;
  }
}

.volume-selection-wrapper {
  padding: var(--ui-space);
  max-width: 2000px;
  min-height: 100%;
  margin: auto;
  display: flex;
  align-items: center;
  justify-content: space-around;
  padding: 150px calc(20px + var(--ui-space));
  .item {
    margin: 80px 0;
    img.cover {
      width: clamp(100px, 20vw, 500px);
      aspect-ratio: 1/1 !important;
      display: block;
      border-radius: 50%;
      border: var(--border-width) solid var(--c-whiteish);
    }
    &.disabled {
      opacity: 0.25;
      pointer-events: none;
    }
    svg.stars {
      .star {
        stroke: var(--stars-color, var(--c-whiteish)) !important;
        fill: none;
      }
      &[data-active-star="1"] .star1 {
        fill: var(--stars-color, var(--c-whiteish)) !important;
      }
      &[data-active-star="2"] .star2 {
        fill: var(--stars-color, var(--c-whiteish)) !important;
      }
      &[data-active-star="3"] .star3 {
        fill: var(--stars-color, var(--c-whiteish)) !important;
      }
    }
  }
  @include media-breakpoint-down(xs) {
    flex-flow: column nowrap;
    .item {
      margin: 30px 0;
      img.cover {
        width: 30vw;
      }
    }
  }
}

// -----------------------------------------------------------------------------
// SPECIFIC - ACCORDION
// -----------------------------------------------------------------------------

.accordion {
  // max-width: 600px;
  margin: 0 #{$space * -2};
  // background: white;
  // border-radius: 12px;
  // box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.accordion-item {
  border-top: var(--border-width) solid var(--c-whiteish);
  border-bottom: var(--border-width) solid var(--c-whiteish);
  // &:last-child {
  //   border-bottom: none;
  // }
  & + .accordion-item {
    border-top: none;
  }

  .accordion-header {
    scroll-margin-top: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 24px;
    // background: white;
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none;
    &:hover {
      opacity: 0.8;
    }
    .accordion-title {
      flex-grow: 1;
      margin: 0 0 0 20px;
      &,
      p,
      h3 {
        margin-bottom: 0;
      }
    }
    .accordion-arrow {
      width: 20px;
      height: 20px;
      border: none;
      background: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      &::before {
        content: "";
        width: 8px;
        height: 8px;
        border-right: 1.5px solid var(--c-whiteish);
        border-bottom: 1.5px solid var(--c-whiteish);
        transform: rotate(45deg);
        transition: inherit;
      }
      &.active {
        transform: rotate(180deg);
      }
    }
  }

  .accordion-content {
    overflow: hidden;
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    height: 0;
    .accordion-body {
      padding-bottom: 35px;
      padding-left: 30px;
      padding-right: 30px;
    }
  }
}

// -----------------------------------------------------------------------------
// SPECIFIC - UI
// -----------------------------------------------------------------------------

.stars {
  display: flex;
  @include media-breakpoint-down(sm) {
    width: 60px;
  }
  &.left {
    @media (max-width: 420px) {
      display: none !important;
    }
  }
  &.right {
    transform: scale(-1, 1);
  }
  svg {
    path.star {
      transition: all $transition-duration;
      stroke: var(--c-whiteish);
      stroke-width: 1.5px;
      opacity: 0.3;
      fill: none;
      @at-root body[data-current-uid="vol1"] &.star1 {
        opacity: 1;
        fill: var(--stars-color, var(--c-whiteish));
        stroke: var(--stars-color, var(--c-whiteish));
      }
      @at-root body[data-current-uid="vol2"] &.star2 {
        opacity: 1;
        fill: var(--stars-color, var(--c-whiteish));
        stroke: var(--stars-color, var(--c-whiteish));
      }
      @at-root body[data-current-uid="vol3"] &.star3 {
        opacity: 1;
        fill: var(--stars-color, var(--c-whiteish));
        stroke: var(--stars-color, var(--c-whiteish));
      }
    }
  }
}

#top-txt,
#bottom-txt-subtitle,
#bottom-txt-close,
#bottom-txt-about {
  z-index: 50;
  position: fixed;
  left: var(--ui-space);
  right: var(--ui-space);
  left: 0;
  right: 0;
  height: var(--ui-space);
  transition: all $transition-duration;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
  // @include font-serif-l;
}
#top-txt {
  top: 0;
}
#bottom-txt-subtitle,
#bottom-txt-close,
#bottom-txt-about {
  bottom: 0;
}
#bottom-txt-about {
  opacity: 0;
  cursor: pointer;
  &:hover {
    opacity: 1;
  }
  @at-root body[data-menu-panel="true"] & {
    opacity: 1;
  }
}
#bottom-txt-close {
  opacity: 0;
  pointer-events: none;
  body[data-about-panel="true"] & {
    opacity: 1;
    pointer-events: all;
  }
}

.button-wrapper {
  background-color: black;
  width: var(--ui-space);
  height: var(--ui-space);
  max-width: var(--ui-space);
  max-height: var(--ui-space);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all $transition-duration;
  overflow: hidden;
  color: var(--c-whiteish);
  button {
    background-color: transparent;
    &:not(.hamburger) {
      width: 100%;
    }
  }
}
#button-wrapper-top-left,
#button-wrapper-top-right,
#button-wrapper-bottom-left,
#button-wrapper-bottom-right {
  position: fixed;
}
#button-wrapper-top-left {
  z-index: 61;
  top: 0;
  left: 0;
  border-left: 1px solid transparent;
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      left: calc(50% - var(--ui-space));
      border-left: var(--border-width) solid var(--c-whiteish);
    }
  }
}
#button-wrapper-top-right {
  z-index: 61;
  top: 0;
  right: 0;
  border-right: 1px solid transparent;
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      right: calc(50% - var(--ui-space));
      border-right: var(--border-width) solid var(--c-whiteish);
    }
  }
}
#button-wrapper-bottom-left {
  z-index: 51;
  bottom: 0;
  left: 0;
}
#button-wrapper-bottom-right {
  z-index: 51;
  bottom: 0;
  right: 0;
}

#ui-line-top,
#ui-line-bottom,
#ui-line-left,
#ui-line-right {
  z-index: 70;
  position: fixed;
  background-color: transparent;
  pointer-events: none;
  transition: all $transition-duration;
}
#ui-line-top {
  top: 0;
  left: 0;
  right: 0;
  height: var(--ui-space);
  border-bottom: var(--border-width) solid var(--c-whiteish);
}
#ui-line-bottom {
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--ui-space);
  border-top: var(--border-width) solid var(--c-whiteish);
}
#ui-line-left {
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--ui-space);
  border-right: var(--border-width) solid var(--c-whiteish);
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      left: calc(50% - var(--ui-space));
      opacity: 0;
    }
  }
}
#ui-line-right {
  right: 0;
  top: 0;
  bottom: 0;
  width: var(--ui-space);
  border-left: var(--border-width) solid var(--c-whiteish);
  @at-root body:not([data-track-open=""])[data-track-info="true"] & {
    @include media-breakpoint-up(sm) {
      right: calc(50% - var(--ui-space));
    }
  }
}

.hamburger-inner::before {
  @include media-breakpoint-up(md) {
    opacity: 0;
  }
}

// ------------------------------------------------------------------------
// COMPLEX STATES
// ------------------------------------------------------------------------

// Hide UI when video is playing

body[data-video-hide-ui="true"] {
  &[data-track-type="video"] {
    &[data-player-playing="true"] {
      &:not(body[data-player-loading="true"]) {
        &:not(body[data-about-panel="true"]) {
          &:not(body[data-accessibility-panel="true"]) {
            &:not(body[data-artangel-panel="true"]) {
              &:not(body[data-menu-panel="true"]) {
                &:not(body[data-track-info="true"]) {
                  cursor: none;

                  #play-pause-button,
                  #prev-track,
                  #next-track {
                    pointer-events: none !important; // NOT WORKING, NOT SURE WHY
                    // background-color: red;
                    // border: 10px solid green;
                  }
                  #ui-line-top,
                  #top-txt {
                    top: calc(0px - var(--ui-space) - 10px);
                  }
                  #track-info-dsk-r,
                  #track-info-dsk-l {
                    span.button-wrapper {
                      bottom: calc(0px - var(--ui-space) - 10px);
                    }
                  }
                  #track-info-dsk-r {
                    right: -51%;
                  }
                  #track-info-dsk-l {
                    left: -51%;
                  }
                  #ui-line-right {
                    right: calc(0px - var(--ui-space) - 10px);
                  }
                  #ui-line-left {
                    left: calc(0px - var(--ui-space) - 10px);
                  }
                  #ui-line-bottom,
                  #bottom-txt-subtitle,
                  #bottom-txt-about {
                    bottom: calc(0px - var(--ui-space) - 10px);
                  }
                  #button-wrapper-top-left {
                    translate: calc(0px - var(--ui-space) - 10px)
                      calc(0px - var(--ui-space) - 10px);
                  }
                  #button-wrapper-top-right {
                    translate: calc(var(--ui-space) + 10px)
                      calc(0px - var(--ui-space) - 10px);
                  }
                  #button-wrapper-bottom-left {
                    translate: calc(0px - var(--ui-space) - 10px)
                      calc(var(--ui-space) + 10px);
                  }
                  #button-wrapper-bottom-right {
                    translate: calc(var(--ui-space) + 10px)
                      calc(var(--ui-space) + 10px);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

// 4k screens

@media (min-width: 3000px) {
  :root {
    --ui-space: 135px;
    --border-width: 2px;
  }
  a,
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-size: calc(var(--ui-space) * 0.35) !important;
  }
  a.track {
    line-height: 2em !important;
  }

  main#main-content {
    #backgrounds {
      #bg-layer1,
      #bg-layer2 {
        background-size: #{$bg-img-w * 3} #{$bg-img-h * 3}; // Back to original image size
        animation-name: bgPan4k;
      }
      #bg-layer2 {
        background-position-y: -#{$bg-img-h};
        scale: -1 1;
      }
    }
    #circle-wrapper #circle-dot.starting-point {
      width: 40px;
      height: 40px;
    }
  }
}

// Accessibility: High contrast

html[data-access-high-contrast="true"] {
  .accessibility-toggle#accessibility-link-contrast {
    &::before {
      background-color: var(--c-whiteish);
    }
    &:hover::before {
      background-color: color-mix(
        in srgb,
        var(--c-whiteish),
        transparent 25%
      ) !important;
    }
  }
  main#main-content #backgrounds #color-cover {
    background-color: black !important;
    mix-blend-mode: normal;
  }
  --c-whiteish: white;

  --stars-color: white;
  body[data-current-uid="vol1"] .stars svg path.star.star1 {
    fill: white !important;
    stroke: white !important;
  }
  body[data-current-uid="vol2"] .stars svg path.star.star2 {
    fill: white !important;
    stroke: white !important;
  }
  body[data-current-uid="vol3"] .stars svg path.star.star3 {
    fill: white !important;
    stroke: white !important;
  }

  .icon-img,
  #play-pause-button::after {
    filter: grayscale(100%) brightness(617%);
  }
  a:hover {
    color: black !important;
    background-color: white !important;
  }
  .hamburger-inner {
    &,
    &::before,
    &::after {
      background-color: white !important;
    }
  }
}

// Accessibility: Large text

html[data-access-txt-size="true"] {
  .accessibility-toggle#accessibility-link-size {
    &::before {
      background-color: var(--c-whiteish);
    }
    &:hover::before {
      background-color: color-mix(
        in srgb,
        var(--c-whiteish),
        transparent 25%
      ) !important;
    }
  }

  font-size: 130%;
  @include media-breakpoint-down(xs) {
    .stars.right {
      display: none !important;
    }
  }
}

// Accessibility: Animations off

html[data-access-animations-off="true"] {
  .accessibility-toggle#accessibility-link-animations {
    &::before {
      background-color: var(--c-whiteish);
    }
    &:hover::before {
      background-color: color-mix(
        in srgb,
        var(--c-whiteish),
        transparent 25%
      ) !important;
    }
  }
  * {
    transition: none !important;
    animation: none !important;
  }
}

// ------------------------------------------------------------------------
// Body states recap
// ------------------------------------------------------------------------
/* 
// panels
body[data-about-panel]
body[data-accessibility-panel]
body[data-artangel-panel]
body[data-menu-panel]
body[data-track-info]

// functional state
body[data-current-uid]
body[data-track-open]
body[data-track-type]

// effects
body[data-circle-animating]
body[data-circle-animation-stage]
body[data-player-loading]
body[data-player-playing]
body[data-video-hide-ui]

// accessibility
body[data-access-high-contrast]
body[data-access-animations-off]
html[data-access-txt-size]
*/

// ------------------------------------------------------------------------
// Layout
// ------------------------------------------------------------------------

// .container-fluid {
//   max-width: 940px;
//   max-width: 1100px;
//   margin-left: auto;
//   margin-right: auto;
//   padding-left: 30px;
//   padding-right: 30px;
//   @include media-breakpoint-down(xs) {
//     padding-left: 15px;
//     padding-right: 15px;
//   }
// }

// -----------------------------------------------------------------------------
// BOOTSTRAP BREAKPOINTS
// -----------------------------------------------------------------------------

// xs ---                 Portrait phones
// sm ---  576px and up   Small devices (landscape phones)
// md ---  768px and up   Medium devices (tablets)
// lg ---  992px and up   Large devices (desktops)
// xl --- 1200px and up   Extra large devices (large desktops)

// No media query necessary for xs breakpoint as it's effectively `@media (min-width: 0) { ... }`
// @include media-breakpoint-up(sm) { ... }
// @include media-breakpoint-only(md) { ... }
// @include media-breakpoint-between(md, xl) { ... }
// @include media-breakpoint-down(lg) { ... }
